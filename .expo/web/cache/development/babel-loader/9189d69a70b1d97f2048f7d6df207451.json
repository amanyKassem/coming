{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/ahmedtaha/Documents/work/react/amany/Archive/src/components/delegate/Notifications.js\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport I18nManager from \"react-native-web/dist/exports/I18nManager\";\nimport { Container, Content, Icon, Input } from 'native-base';\nimport styles from \"../../../assets/styles\";\nimport i18n from \"../../../locale/i18n\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getNotifications, deleteNoti } from \"../../actions\";\nimport Header from \"../../common/Header\";\nimport COLORS from \"../../consts/colors\";\nvar height = Dimensions.get('window').height;\nvar isIOS = Platform.OS === 'ios';\n\nfunction Notifications(_ref) {\n  var _this = this;\n\n  var navigation = _ref.navigation,\n      route = _ref.route;\n  var lang = useSelector(function (state) {\n    return state.lang.lang;\n  });\n  var token = useSelector(function (state) {\n    return state.auth.user ? state.auth.user.data.token : null;\n  });\n  var notifications = useSelector(function (state) {\n    return state.notifications.notifications;\n  });\n  var notificationsLoader = useSelector(function (state) {\n    return state.notifications.loader;\n  });\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      screenLoader = _useState2[0],\n      setScreenLoader = _useState2[1];\n\n  var dispatch = useDispatch();\n\n  function fetchData() {\n    setScreenLoader(true);\n    dispatch(getNotifications(lang, token));\n  }\n\n  function deleteNotify(id) {\n    dispatch(deleteNoti(lang, id, token));\n  }\n\n  useEffect(function () {\n    fetchData();\n    var unsubscribe = navigation.addListener('focus', function () {\n      fetchData();\n    });\n    return unsubscribe;\n  }, [navigation, notificationsLoader]);\n  useEffect(function () {\n    setScreenLoader(false);\n  }, [notifications]);\n\n  function renderLoader() {\n    if (screenLoader) {\n      return React.createElement(View, {\n        style: [styles.loading, styles.flexCenter, {\n          height: '100%'\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 17\n        }\n      }, React.createElement(ActivityIndicator, {\n        size: \"large\",\n        color: COLORS.mstarda,\n        style: {\n          alignSelf: 'center'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 21\n        }\n      }));\n    }\n  }\n\n  function renderNoData() {\n    if (notifications && notifications.length <= 0) {\n      return React.createElement(View, {\n        style: [styles.directionColumnCenter, styles.Width_100, styles.heightFull],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 17\n        }\n      }, React.createElement(Image, {\n        source: require(\"../../../assets/images/note.png\"),\n        resizeMode: 'contain',\n        style: {\n          alignSelf: 'center',\n          width: 200,\n          height: 200\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }\n      }));\n    }\n\n    return null;\n  }\n\n  return React.createElement(Container, {\n    style: [styles.bg_gray],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, renderLoader(), React.createElement(Content, {\n    contentContainerStyle: [styles.bgFullWidth, styles.bg_gray],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, React.createElement(Header, {\n    navigation: navigation,\n    title: i18n.t('notifications'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }), React.createElement(View, {\n    style: [styles.bgFullWidth, styles.bg_White, styles.Width_100, styles.paddingHorizontal_20, {\n      overflow: 'hidden',\n      paddingBottom: 20\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }, notifications && notifications.length > 0 ? notifications.map(function (noty, i) {\n    return React.createElement(TouchableOpacity, {\n      key: i,\n      onPress: function onPress() {\n        return navigation.navigate('orderDetails', {\n          id: noty.id\n        });\n      },\n      style: [styles.borderGray, styles.directionRow, styles.Radius_5, styles.marginTop_15, styles.paddingVertical_5, styles.paddingHorizontal_10],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 37\n      }\n    }, React.createElement(Text, {\n      style: [styles.textRegular, styles.text_gray, styles.textSize_14, styles.writingDir, {\n        marginRight: 15,\n        lineHeight: 22,\n        flex: 1\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 41\n      }\n    }, noty.body), React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return deleteNotify(noty.id);\n      },\n      style: [styles.paddingVertical_5, styles.paddingHorizontal_5, styles.Radius_50],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 41\n      }\n    }, React.createElement(Image, {\n      source: require(\"../../../assets/images/delete_red.png\"),\n      style: [styles.icon23],\n      resizeMode: 'contain',\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 45\n      }\n    })));\n  }) : renderNoData())));\n}\n\nexport default Notifications;","map":{"version":3,"sources":["/Users/ahmedtaha/Documents/work/react/amany/Archive/src/components/delegate/Notifications.js"],"names":["React","useEffect","useRef","useState","Container","Content","Icon","Input","styles","i18n","useDispatch","useSelector","getNotifications","deleteNoti","Header","COLORS","height","Dimensions","get","isIOS","Platform","OS","Notifications","navigation","route","lang","state","token","auth","user","data","notifications","notificationsLoader","loader","screenLoader","setScreenLoader","dispatch","fetchData","deleteNotify","id","unsubscribe","addListener","renderLoader","loading","flexCenter","mstarda","alignSelf","renderNoData","length","directionColumnCenter","Width_100","heightFull","require","width","bg_gray","bgFullWidth","t","bg_White","paddingHorizontal_20","overflow","paddingBottom","map","noty","i","navigate","borderGray","directionRow","Radius_5","marginTop_15","paddingVertical_5","paddingHorizontal_10","textRegular","text_gray","textSize_14","writingDir","marginRight","lineHeight","flex","body","paddingHorizontal_5","Radius_50","icon23"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from \"react\";\nimport {View, Text, Image, TouchableOpacity, Dimensions, ActivityIndicator, I18nManager} from \"react-native\";\nimport {Container, Content, Icon, Input} from 'native-base'\nimport styles from '../../../assets/styles'\nimport i18n from \"../../../locale/i18n\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getNotifications , deleteNoti} from '../../actions';\nimport Header from '../../common/Header';\nimport COLORS from \"../../consts/colors\";\n\nconst height = Dimensions.get('window').height;\nconst isIOS = Platform.OS === 'ios';\n\nfunction Notifications({navigation,route}) {\n\n\n    const lang = useSelector(state => state.lang.lang);\n    const token = useSelector(state => state.auth.user ? state.auth.user.data.token : null);\n    const notifications = useSelector(state => state.notifications.notifications);\n    const notificationsLoader = useSelector(state => state.notifications.loader);\n    const [screenLoader , setScreenLoader ] = useState(true);\n\n    const dispatch = useDispatch();\n\n    function fetchData(){\n        setScreenLoader(true)\n        dispatch(getNotifications(lang, token))\n    }\n    function deleteNotify(id){\n        dispatch(deleteNoti(lang , id, token))\n    }\n\n    useEffect(() => {\n        fetchData();\n        const unsubscribe = navigation.addListener('focus', () => {\n            fetchData();\n        });\n\n        return unsubscribe;\n    }, [navigation , notificationsLoader]);\n\n    useEffect(() => {\n        setScreenLoader(false)\n    }, [notifications]);\n\n    function renderLoader(){\n        if (screenLoader){\n            return(\n                <View style={[styles.loading, styles.flexCenter, {height:'100%'}]}>\n                    <ActivityIndicator size=\"large\" color={COLORS.mstarda} style={{ alignSelf: 'center' }} />\n                </View>\n            );\n        }\n    }\n\n    function renderNoData() {\n        if (notifications && (notifications).length <= 0) {\n            return (\n                <View style={[styles.directionColumnCenter , styles.Width_100, styles.heightFull]}>\n                    <Image source={require('../../../assets/images/note.png')} resizeMode={'contain'}\n                           style={{alignSelf: 'center', width: 200, height: 200}}/>\n                </View>\n            );\n        }\n\n        return null\n    }\n\n\n\n    return (\n        <Container style={[styles.bg_gray]}>\n            {renderLoader()}\n            <Content contentContainerStyle={[styles.bgFullWidth , styles.bg_gray]}>\n\n                <Header navigation={navigation} title={ i18n.t('notifications') } />\n\n                <View style={[styles.bgFullWidth ,styles.bg_White, styles.Width_100 , styles.paddingHorizontal_20 , {overflow:'hidden' , paddingBottom:20}]}>\n\n\n                    {\n                        notifications && (notifications).length > 0?\n\n                            notifications.map((noty, i) => {\n                                return (\n                                    <TouchableOpacity key={i} onPress={() => navigation.navigate('orderDetails' , {id:noty.id})} style={[styles.borderGray, styles.directionRow  , styles.Radius_5 , styles.marginTop_15 , styles.paddingVertical_5 , styles.paddingHorizontal_10]}>\n                                        <Text style={[styles.textRegular , styles.text_gray , styles.textSize_14 , styles.writingDir , {marginRight:15 , lineHeight:22, flex:1}]}>{noty.body}</Text>\n                                        <TouchableOpacity onPress = {() => deleteNotify(noty.id)} style={[styles.paddingVertical_5 , styles.paddingHorizontal_5, styles.Radius_50]}>\n                                            <Image source={require('../../../assets/images/delete_red.png')} style={[styles.icon23]} resizeMode={'contain'} />\n                                        </TouchableOpacity>\n                                    </TouchableOpacity>\n                                )\n                            })\n                            :\n                            renderNoData()\n                    }\n                </View>\n\n            </Content>\n        </Container>\n    );\n}\n\nexport default Notifications;\n\n\n"]},"metadata":{},"sourceType":"module"}