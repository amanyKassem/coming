{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/ahmedtaha/Documents/work/react/amany/Archive/src/components/BasketDetails.js\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport I18nManager from \"react-native-web/dist/exports/I18nManager\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { Container, Content, Form, Icon, Input, Item } from 'native-base';\nimport styles from \"../../assets/styles\";\nimport i18n from \"../../locale/i18n\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getCartDetails, ChangeProductQuantity, ValidationCoupon, deleteProduct } from \"../actions\";\nimport Header from \"../common/Header\";\nimport BasketProduct from \"./BasketProduct\";\nimport COLORS from \"../consts/colors\";\nimport { useIsFocused } from '@react-navigation/native';\nvar height = Dimensions.get('window').height;\nvar isIOS = Platform.OS === 'ios';\nvar latitudeDelta = 0.922;\nvar longitudeDelta = 0.521;\n\nfunction BasketDetails(_ref) {\n  var _this = this;\n\n  var navigation = _ref.navigation,\n      route = _ref.route;\n  var id = route.params.id;\n  var lang = useSelector(function (state) {\n    return state.lang.lang;\n  });\n  var token = useSelector(function (state) {\n    return state.auth.user ? state.auth.user.data.token : null;\n  });\n  var cartDetails = useSelector(function (state) {\n    return state.cart.cartDetails;\n  });\n  var cartDetailsLoader = useSelector(function (state) {\n    return state.cart.loader;\n  });\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      screenLoader = _useState2[0],\n      setScreenLoader = _useState2[1];\n\n  var validationCoupon = useSelector(function (state) {\n    return state.cart.validationCoupon;\n  });\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      coupon = _useState4[0],\n      setCoupon = _useState4[1];\n\n  var dispatch = useDispatch();\n  var isFocused = useIsFocused();\n\n  function fetchData() {\n    setScreenLoader(true);\n    dispatch(getCartDetails(lang, id, coupon, token)).then(function () {\n      return setScreenLoader(false);\n    });\n  }\n\n  useEffect(function () {\n    if (isFocused) {\n      fetchData();\n      if (cartDetails && cartDetails.count == 0) navigation.navigate('basket');\n    }\n  }, [isFocused, cartDetails && cartDetails.count ? cartDetails.count : null]);\n\n  function _DeleteProducts(CartId, ProviderId) {\n    dispatch(deleteProduct(CartId, ProviderId, lang, token, navigation)).then(function () {\n      return dispatch(getCartDetails(lang, id, coupon, token));\n    });\n  }\n\n  function _Increase(CartId, ProviderId, type) {\n    dispatch(ChangeProductQuantity(type, CartId, ProviderId, lang, token)).then(function () {\n      return dispatch(getCartDetails(lang, id, coupon, token));\n    });\n  }\n\n  function _Decrease(CartId, ProviderId, type) {\n    dispatch(ChangeProductQuantity(type, CartId, ProviderId, lang, token)).then(function () {\n      return dispatch(getCartDetails(lang, id, coupon, token));\n    });\n  }\n\n  var changeCoupon = function changeCoupon(coupon) {\n    setCoupon(coupon);\n    dispatch(ValidationCoupon(coupon, lang, token)).then(function () {\n      return dispatch(getCartDetails(lang, id, coupon, token));\n    });\n  };\n\n  function renderLoader() {\n    if (screenLoader) {\n      return React.createElement(View, {\n        style: [styles.loading, styles.flexCenter, {\n          height: '100%'\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }\n      }, React.createElement(ActivityIndicator, {\n        size: \"large\",\n        color: COLORS.mstarda,\n        style: {\n          alignSelf: 'center'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }\n      }));\n    }\n  }\n\n  return React.createElement(Container, {\n    style: [styles.bg_gray],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, renderLoader(), React.createElement(Content, {\n    contentContainerStyle: [styles.bgFullWidth, styles.bg_gray],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, React.createElement(Header, {\n    navigation: navigation,\n    title: i18n.t('basket'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }), cartDetails ? React.createElement(View, {\n    style: [styles.bgFullWidth, styles.bg_White, styles.Width_100, {\n      overflow: 'hidden'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 25\n    }\n  }, cartDetails.provider ? React.createElement(View, {\n    style: [styles.borderGray, styles.marginVertical_10, styles.directionRow, styles.Radius_5, {\n      padding: 10\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 37\n    }\n  }, React.createElement(Image, {\n    source: {\n      uri: cartDetails.provider.avatar\n    },\n    style: [styles.icon50, styles.Radius_7],\n    resizeMode: 'cover',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 41\n    }\n  }), React.createElement(View, {\n    style: [styles.marginHorizontal_15, {\n      flex: 1\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 41\n    }\n  }, React.createElement(Text, {\n    style: [styles.textRegular, styles.text_gray, styles.textSize_14, styles.alignStart],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 45\n    }\n  }, cartDetails.provider.name), React.createElement(View, {\n    style: [styles.directionRow, styles.marginTop_5],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 45\n    }\n  }, React.createElement(Icon, {\n    type: 'MaterialIcons',\n    name: 'location-on',\n    style: [styles.textSize_14, styles.text_mstarda, {\n      marginRight: 5\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 49\n    }\n  }), React.createElement(Text, {\n    style: [styles.textRegular, styles.text_midGray, styles.textSize_13, {\n      lineHeight: 20\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 49\n    }\n  }, cartDetails.provider.address)))) : null, React.createElement(View, {\n    style: [styles.bg_light_gray, styles.paddingHorizontal_20, styles.height_45, styles.marginBottom_5, styles.directionRow],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 29\n    }\n  }, React.createElement(Text, {\n    style: [styles.textBold, styles.text_mstarda, styles.textSize_14],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 33\n    }\n  }, i18n.t('products'))), cartDetails.products ? cartDetails.products.map(function (pro, i) {\n    return React.createElement(BasketProduct, {\n      key: i,\n      pro: pro,\n      i: i,\n      DeleteProducts: function DeleteProducts() {\n        return _DeleteProducts(pro.id, cartDetails.provider.id);\n      },\n      Decrease: function Decrease() {\n        return _Decrease(pro.id, cartDetails.provider.id, 'minus');\n      },\n      Increase: function Increase() {\n        return _Increase(pro.id, cartDetails.provider.id, 'increase');\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 45\n      }\n    });\n  }) : null, React.createElement(View, {\n    style: [styles.directionRow, styles.bg_black, styles.paddingHorizontal_20, styles.height_45, styles.marginTop_20, styles.marginBottom_10],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 29\n    }\n  }, React.createElement(Image, {\n    source: require(\"../../assets/images/percentage.png\"),\n    style: [styles.icon25, {\n      marginRight: 15\n    }],\n    resizeMode: 'contain',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 33\n    }\n  }), React.createElement(Text, {\n    style: [styles.textBold, styles.text_White, styles.textSize_14],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 33\n    }\n  }, i18n.t('addCoupon'))), React.createElement(Item, {\n    style: [styles.item, styles.Width_90, styles.SelfCenter],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 29\n    }\n  }, React.createElement(Input, {\n    style: [styles.input, {\n      borderTopRightRadius: 25,\n      borderTopLeftRadius: 25,\n      borderColor: coupon ? COLORS.mstarda : '#eee',\n      borderWidth: 1,\n      backgroundColor: coupon ? '#fff' : '#eee'\n    }],\n    placeholder: i18n.t('discountCode'),\n    placeholderTextColor: COLORS.midGray,\n    onChangeText: function onChangeText(coupon) {\n      return changeCoupon(coupon);\n    },\n    value: coupon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 33\n    }\n  })), React.createElement(View, {\n    style: [styles.directionRowSpace, styles.paddingHorizontal_20, styles.bg_light_gray, styles.marginBottom_5, styles.height_45],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 29\n    }\n  }, React.createElement(Text, {\n    style: [styles.textBold, styles.text_gray, styles.textSize_14],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 33\n    }\n  }, \" \", i18n.t('total'), \" \"), React.createElement(Text, {\n    style: [styles.textBold, styles.text_gray, styles.textSize_14],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 33\n    }\n  }, cartDetails.prices ? cartDetails.prices.total : 0, \" \", i18n.t('RS'))), React.createElement(View, {\n    style: [styles.directionRowSpace, styles.paddingHorizontal_20, styles.bg_light_gray, styles.height_45],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 29\n    }\n  }, React.createElement(Text, {\n    style: [styles.textBold, styles.text_gray, styles.textSize_14],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 33\n    }\n  }, \" \", i18n.t('tax'), \" \"), React.createElement(Text, {\n    style: [styles.textBold, styles.text_gray, styles.textSize_14],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 33\n    }\n  }, cartDetails.prices ? cartDetails.prices.added_value : '0', \" \", i18n.t('RS'))), token ? React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return navigation.navigate('orderData', {\n        type: cartDetails.provider.type,\n        provider_id: cartDetails.provider.id,\n        coupon: coupon\n      });\n    },\n    style: [styles.mstrdaBtn, styles.Width_90, styles.SelfCenter, styles.marginTop_40, styles.marginBottom_25],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 37\n    }\n  }, React.createElement(Text, {\n    style: [styles.textBold, styles.text_White, styles.textSize_15],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 41\n    }\n  }, i18n.t('confirm'))) : null) : null));\n}\n\nexport default BasketDetails;","map":{"version":3,"sources":["/Users/ahmedtaha/Documents/work/react/amany/Archive/src/components/BasketDetails.js"],"names":["React","useEffect","useRef","useState","Container","Content","Form","Icon","Input","Item","styles","i18n","useDispatch","useSelector","getCartDetails","ChangeProductQuantity","ValidationCoupon","deleteProduct","Header","BasketProduct","COLORS","useIsFocused","height","Dimensions","get","isIOS","Platform","OS","latitudeDelta","longitudeDelta","BasketDetails","navigation","route","id","params","lang","state","token","auth","user","data","cartDetails","cart","cartDetailsLoader","loader","screenLoader","setScreenLoader","validationCoupon","coupon","setCoupon","dispatch","isFocused","fetchData","then","count","navigate","DeleteProducts","CartId","ProviderId","Increase","type","Decrease","changeCoupon","renderLoader","loading","flexCenter","mstarda","alignSelf","bg_gray","bgFullWidth","t","bg_White","Width_100","overflow","provider","borderGray","marginVertical_10","directionRow","Radius_5","padding","uri","avatar","icon50","Radius_7","marginHorizontal_15","flex","textRegular","text_gray","textSize_14","alignStart","name","marginTop_5","text_mstarda","marginRight","text_midGray","textSize_13","lineHeight","address","bg_light_gray","paddingHorizontal_20","height_45","marginBottom_5","textBold","products","map","pro","i","bg_black","marginTop_20","marginBottom_10","require","icon25","text_White","item","Width_90","SelfCenter","input","borderTopRightRadius","borderTopLeftRadius","borderColor","borderWidth","backgroundColor","midGray","directionRowSpace","prices","total","added_value","provider_id","mstrdaBtn","marginTop_40","marginBottom_25","textSize_15"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from \"react\";\nimport {View, Text, Image, TouchableOpacity, Dimensions, FlatList, I18nManager, ActivityIndicator} from \"react-native\";\nimport {Container, Content, Form, Icon, Input, Item} from 'native-base'\nimport styles from '../../assets/styles'\nimport i18n from \"../../locale/i18n\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getCartDetails , ChangeProductQuantity , ValidationCoupon , deleteProduct} from '../actions';\nimport Header from '../common/Header';\nimport BasketProduct from './BasketProduct';\nimport COLORS from \"../consts/colors\";\nimport { useIsFocused } from '@react-navigation/native';\n\nconst height = Dimensions.get('window').height;\nconst isIOS = Platform.OS === 'ios';\nconst latitudeDelta = 0.922;\nconst longitudeDelta = 0.521;\n\nfunction BasketDetails({navigation,route}) {\n    const {id} = route.params;\n    const lang = useSelector(state => state.lang.lang);\n    const token = useSelector(state => state.auth.user ? state.auth.user.data.token : null);\n    const cartDetails = useSelector(state => state.cart.cartDetails);\n    const cartDetailsLoader = useSelector(state => state.cart.loader);\n    const [screenLoader , setScreenLoader ] = useState(true);\n\n    const validationCoupon = useSelector(state => state.cart.validationCoupon);\n    const [coupon, setCoupon] = useState('');\n\n\n    const dispatch = useDispatch();\n    const isFocused = useIsFocused();\n\n    function fetchData(){\n        setScreenLoader(true)\n        dispatch(getCartDetails(lang , id, coupon , token)).then(() => setScreenLoader(false))\n    }\n\n    useEffect(() => {\n        if (isFocused) {\n            fetchData();\n            if(cartDetails && cartDetails.count == 0)\n                navigation.navigate('basket')\n        }\n    }, [isFocused , cartDetails && cartDetails.count ? cartDetails.count : null])\n\n    function DeleteProducts(CartId, ProviderId) {\n        dispatch(deleteProduct(CartId, ProviderId, lang, token , navigation)).then(() => dispatch(getCartDetails(lang , id, coupon , token)))\n    }\n\n    function Increase(CartId, ProviderId, type) {\n        dispatch(ChangeProductQuantity(type, CartId, ProviderId, lang, token)).then(() => dispatch(getCartDetails(lang , id, coupon , token)))\n    }\n\n    function Decrease(CartId, ProviderId, type) {\n        dispatch(ChangeProductQuantity(type, CartId, ProviderId, lang, token)).then(() => dispatch(getCartDetails(lang , id, coupon , token)))\n    }\n\n    const changeCoupon = (coupon) => {\n        setCoupon(coupon)\n        dispatch(ValidationCoupon(coupon, lang, token)).then(() => dispatch(getCartDetails(lang , id, coupon , token)))\n    }\n\n    function renderLoader(){\n        if (screenLoader){\n            return(\n                <View style={[styles.loading, styles.flexCenter, {height:'100%'}]}>\n                    <ActivityIndicator size=\"large\" color={COLORS.mstarda} style={{ alignSelf: 'center' }} />\n                </View>\n            );\n        }\n    }\n\n\n    return (\n        <Container style={[styles.bg_gray]}>\n            {renderLoader()}\n            <Content contentContainerStyle={[styles.bgFullWidth , styles.bg_gray]}>\n\n                <Header navigation={navigation} title={ i18n.t('basket') } />\n\n                {\n                    cartDetails ?\n                        <View style={[styles.bgFullWidth ,styles.bg_White, styles.Width_100, {overflow:'hidden'}]}>\n\n                            {\n                                cartDetails.provider ?\n                                    <View style={[styles.borderGray,styles.marginVertical_10 , styles.directionRow , styles.Radius_5 , {padding:10}]}>\n                                        <Image source={{uri:cartDetails.provider.avatar}} style={[styles.icon50 , styles.Radius_7]} resizeMode={'cover'} />\n                                        <View style={[styles.marginHorizontal_15,{flex:1}]}>\n                                            <Text style={[styles.textRegular , styles.text_gray , styles.textSize_14 , styles.alignStart]}>{cartDetails.provider.name}</Text>\n                                            <View style={[styles.directionRow , styles.marginTop_5]}>\n                                                <Icon type={'MaterialIcons'} name={'location-on'} style={[styles.textSize_14 , styles.text_mstarda , {marginRight:5}]} />\n                                                <Text style={[styles.textRegular , styles.text_midGray , styles.textSize_13, {lineHeight:20}]}>{cartDetails.provider.address}</Text>\n                                            </View>\n                                        </View>\n                                    </View>\n                                    :\n                                    null\n                            }\n\n\n\n                            <View style={[styles.bg_light_gray ,styles.paddingHorizontal_20 , styles.height_45 , styles.marginBottom_5 , styles.directionRow]}>\n                                <Text style={[styles.textBold , styles.text_mstarda , styles.textSize_14 ]}>{i18n.t('products') }</Text>\n                            </View>\n\n                            {\n                                cartDetails.products ?\n                                    cartDetails.products.map((pro, i) => {\n                                        return (\n                                            <BasketProduct key={i} pro={pro} i={i} DeleteProducts={() => DeleteProducts(pro.id, cartDetails.provider.id)} Decrease={() => Decrease(pro.id, cartDetails.provider.id, 'minus')} Increase={() => Increase(pro.id, cartDetails.provider.id, 'increase')}/>\n                                        )\n                                    })\n                                    :\n                                    null\n                            }\n\n\n                            <View style={[styles.directionRow ,styles.bg_black ,styles.paddingHorizontal_20 , styles.height_45 , styles.marginTop_20 , styles.marginBottom_10]}>\n                                <Image source={require('../../assets/images/percentage.png')} style={[styles.icon25 , {marginRight:15}]} resizeMode={'contain'} />\n                                <Text style={[styles.textBold , styles.text_White , styles.textSize_14]}>{i18n.t('addCoupon') }</Text>\n                            </View>\n\n                            <Item style={[styles.item , styles.Width_90 , styles.SelfCenter]}>\n                                <Input style={[styles.input , {borderTopRightRadius :25 ,borderTopLeftRadius :25 , borderColor:coupon ? COLORS.mstarda : '#eee', borderWidth:1 , backgroundColor:coupon ? '#fff' : '#eee'}]}\n                                       placeholder={ i18n.t('discountCode') }\n                                       placeholderTextColor={COLORS.midGray}\n                                       onChangeText={(coupon) => changeCoupon(coupon)}\n                                       value={coupon}\n                                />\n                            </Item>\n\n                            <View style={[styles.directionRowSpace , styles.paddingHorizontal_20 , styles.bg_light_gray , styles.marginBottom_5, styles.height_45 ]}>\n                                <Text style={[styles.textBold , styles.text_gray , styles.textSize_14]}> {i18n.t('total') } </Text>\n                                <Text style={[styles.textBold , styles.text_gray, styles.textSize_14]}>{cartDetails.prices ? cartDetails.prices.total : 0} {i18n.t('RS') }</Text>\n                            </View>\n\n                            <View style={[styles.directionRowSpace , styles.paddingHorizontal_20 , styles.bg_light_gray , styles.height_45 ]}>\n                                <Text style={[styles.textBold , styles.text_gray , styles.textSize_14]}> {i18n.t('tax') } </Text>\n                                <Text style={[styles.textBold , styles.text_gray , styles.textSize_14]}>{cartDetails.prices ? cartDetails.prices.added_value : '0'} {i18n.t('RS') }</Text>\n                            </View>\n\n                            {\n                                token ?\n                                    <TouchableOpacity onPress={() => navigation.navigate('orderData' , {type:cartDetails.provider.type , provider_id:cartDetails.provider.id , coupon})} style={[styles.mstrdaBtn , styles.Width_90 , styles.SelfCenter  , styles.marginTop_40 , styles.marginBottom_25]}>\n                                        <Text style={[styles.textBold , styles.text_White , styles.textSize_15]}>{ i18n.t('confirm') }</Text>\n                                    </TouchableOpacity>\n                                    :\n                                    null\n                            }\n\n                        </View>\n                        :\n                        null\n                }\n\n\n            </Content>\n        </Container>\n    );\n}\n\nexport default BasketDetails;\n\n\n"]},"metadata":{},"sourceType":"module"}