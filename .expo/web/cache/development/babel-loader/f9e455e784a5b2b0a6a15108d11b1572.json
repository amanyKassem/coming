{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/ahmedtaha/Documents/work/react/amany/Archive/src/common/SetLocation.js\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport I18nManager from \"react-native-web/dist/exports/I18nManager\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { Container, Content, Icon, Input, Item, Label } from 'native-base';\nimport styles from \"../../assets/styles\";\nimport i18n from \"../../locale/i18n\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport Header from \"./Header\";\nimport COLORS from \"../consts/colors\";\nimport MapView from 'react-native-maps';\nimport * as Location from 'expo-location';\nimport axios from 'axios';\nimport Modal from \"react-native-modal\";\nimport { addPlace, editPlace } from \"../actions\";\nvar height = Dimensions.get('window').height;\nvar isIOS = Platform.OS === 'ios';\nvar latitudeDelta = 0.922;\nvar longitudeDelta = 0.521;\n\nfunction SetLocation(_ref) {\n  var _route$params,\n      _route$params2,\n      _this = this;\n\n  var navigation = _ref.navigation,\n      route = _ref.route;\n  var edit = route.params.edit;\n\n  var _ref2 = (_route$params = route.params) != null ? _route$params : null,\n      latitude = _ref2.latitude,\n      longitude = _ref2.longitude,\n      name = _ref2.name,\n      address = _ref2.address,\n      id = _ref2.id;\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      initMap = _useState2[0],\n      setInitMap = _useState2[1];\n\n  var lang = useSelector(function (state) {\n    return state.lang.lang;\n  });\n  var token = useSelector(function (state) {\n    return state.auth.user ? state.auth.user.data.token : null;\n  });\n  var mapRef = useRef(null);\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      userLocation = _useState4[0],\n      setUserLocation = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      search = _useState6[0],\n      setSearch = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      searchResult = _useState8[0],\n      setSearchResult = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      selectedLocation = _useState10[0],\n      setLocation = _useState10[1];\n\n  var _useState11 = useState(70),\n      _useState12 = _slicedToArray(_useState11, 2),\n      searchHeight = _useState12[0],\n      setSearchHeight = _useState12[1];\n\n  var _useState13 = useState(''),\n      _useState14 = _slicedToArray(_useState13, 2),\n      locationName = _useState14[0],\n      setLocationName = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      showModal = _useState16[0],\n      setShowModal = _useState16[1];\n\n  var dispatch = useDispatch();\n  useEffect(function () {\n    (function _callee() {\n      var _await$Location$reque, status, location, _await$Location$getCu, _await$Location$getCu2, _latitude, _longitude, _location;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Location.requestPermissionsAsync());\n\n            case 2:\n              _await$Location$reque = _context.sent;\n              status = _await$Location$reque.status;\n\n              if (status !== 'granted') {\n                alert('Permission to access location was denied');\n                setUserLocation({\n                  latitude: '24.774265',\n                  longitude: '46.738586'\n                });\n                setInitMap(false);\n              }\n\n              if (!edit) {\n                _context.next = 12;\n                break;\n              }\n\n              location = {\n                latitude: latitude,\n                longitude: longitude\n              };\n              setUserLocation(location);\n              setLocationName(name);\n              setSearch(address);\n              _context.next = 22;\n              break;\n\n            case 12:\n              _context.next = 14;\n              return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync({}));\n\n            case 14:\n              _await$Location$getCu = _context.sent;\n              _await$Location$getCu2 = _await$Location$getCu.coords;\n              _latitude = _await$Location$getCu2.latitude;\n              _longitude = _await$Location$getCu2.longitude;\n              _location = {\n                latitude: _latitude,\n                longitude: _longitude\n              };\n              setUserLocation(_location);\n              setLocationName('');\n              setSearch('');\n\n            case 22:\n              setInitMap(false);\n\n            case 23:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, [edit, (_route$params2 = route.params) == null ? void 0 : _route$params2.id]);\n\n  function toggleModal() {\n    setShowModal(!showModal);\n  }\n\n  function _handleMapRegionChange(e) {\n    var formattedItem, getCity, _await$axios$get, data;\n\n    return _regeneratorRuntime.async(function _handleMapRegionChange$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            formattedItem = {\n              name: '',\n              address: '',\n              latitude: e.latitude,\n              longitude: e.longitude\n            };\n            getCity = 'https://maps.googleapis.com/maps/api/geocode/json?latlng=';\n            getCity += e.latitude + ',' + e.longitude;\n            getCity += '&key=AIzaSyCJTSwkdcdRpIXp2yG7DfSRKFWxKhQdYhQ&language=ar&sensor=true';\n            _context2.prev = 4;\n            _context2.next = 7;\n            return _regeneratorRuntime.awrap(axios.get(getCity));\n\n          case 7:\n            _await$axios$get = _context2.sent;\n            data = _await$axios$get.data;\n            formattedItem = {\n              name: data.results[0].formatted_address,\n              address: data.results[0].formatted_address,\n              latitude: e.latitude,\n              longitude: e.longitude\n            };\n            setSearch(data.results[0].formatted_address);\n            _context2.next = 16;\n            break;\n\n          case 13:\n            _context2.prev = 13;\n            _context2.t0 = _context2[\"catch\"](4);\n            console.log(_context2.t0);\n\n          case 16:\n            setLocation(formattedItem);\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[4, 13]], Promise);\n  }\n\n  function setSelectedLocation(item) {\n    var location = item.geometry.location;\n    var formattedItem = {\n      name: item.formatted_address,\n      address: item.formatted_address,\n      latitude: location.lat,\n      longitude: location.lng\n    };\n    setSearchResult([]);\n    setSearchHeight(60);\n    setLocation(formattedItem);\n    mapRef.current.animateToRegion({\n      latitude: formattedItem.latitude,\n      longitude: formattedItem.longitude,\n      latitudeDelta: 0.422,\n      longitudeDelta: 0.121\n    }, 350);\n  }\n\n  function onSearch() {\n    var endPoint, _await$axios$get2, data;\n\n    return _regeneratorRuntime.async(function onSearch$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            endPoint = 'https://maps.googleapis.com/maps/api/place/textsearch/json?query=';\n            endPoint += search;\n            endPoint += '&key=AIzaSyCJTSwkdcdRpIXp2yG7DfSRKFWxKhQdYhQ&language=' + lang;\n            _context3.prev = 3;\n            _context3.next = 6;\n            return _regeneratorRuntime.awrap(axios.get(endPoint));\n\n          case 6:\n            _await$axios$get2 = _context3.sent;\n            data = _await$axios$get2.data;\n            setSearchResult(data.results);\n            setSearchHeight(270);\n            _context3.next = 15;\n            break;\n\n          case 12:\n            _context3.prev = 12;\n            _context3.t0 = _context3[\"catch\"](3);\n            console.log(_context3.t0);\n\n          case 15:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[3, 12]], Promise);\n  }\n\n  function saveLocation() {\n    toggleModal();\n    if (edit) dispatch(editPlace(lang, id, userLocation.latitude, userLocation.longitude, search, locationName, token, navigation));else dispatch(addPlace(lang, userLocation.latitude, userLocation.longitude, search, locationName, token, navigation));\n  }\n\n  return React.createElement(Container, {\n    style: [styles.bg_gray],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, React.createElement(Content, {\n    contentContainerStyle: [styles.bgFullWidth, styles.bg_gray],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, React.createElement(Header, {\n    navigation: navigation,\n    title: i18n.t('home'),\n    fromLoc: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }\n  }), React.createElement(View, {\n    style: [styles.mapInputContainer],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, React.createElement(Icon, {\n    type: \"Entypo\",\n    name: \"location-pin\",\n    style: {\n      color: COLORS.gray,\n      fontSize: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 21\n    }\n  }), React.createElement(Input, {\n    style: [styles.mapInput],\n    placeholder: i18n.t('chooseLocation'),\n    value: search,\n    onChangeText: function onChangeText(search) {\n      return setSearch(search);\n    },\n    onSubmitEditing: function onSubmitEditing() {\n      return onSearch();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 21\n    }\n  })), React.createElement(View, {\n    style: [styles.bgFullWidth, styles.bg_White, styles.Width_100, styles.marginTop_40, {\n      paddingBottom: 35\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }, React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 21\n    }\n  }, searchResult && searchResult.length > 0 ? React.createElement(View, {\n    style: {\n      alignSelf: 'center',\n      width: '86%',\n      maxHeight: 200,\n      borderBottomLeftRadius: 10,\n      borderBottomRightRadius: 10,\n      overflow: 'hidden',\n      position: 'absolute',\n      zIndex: 2,\n      top: 30,\n      left: 30,\n      minHeight: 60\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 33\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: {\n      position: 'absolute',\n      zIndex: 3,\n      right: -1,\n      top: -1.5\n    },\n    onPress: function onPress() {\n      return setSearchResult([]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 37\n    }\n  }, React.createElement(Icon, {\n    type: 'AntDesign',\n    name: 'closecircle',\n    style: {\n      color: COLORS.blue\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 41\n    }\n  })), React.createElement(View, {\n    style: {\n      alignSelf: 'center',\n      width: '100%',\n      height: 220,\n      borderBottomLeftRadius: 10,\n      borderBottomRightRadius: 10,\n      paddingBottom: 20,\n      backgroundColor: '#fff',\n      borderRadius: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 37\n    }\n  }, React.createElement(ScrollView, {\n    style: {\n      zIndex: 99999999\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 41\n    }\n  }, searchResult.map(function (item, i) {\n    return React.createElement(TouchableOpacity, {\n      key: i,\n      onPress: function onPress() {\n        return setSelectedLocation(item);\n      },\n      style: {\n        flexDirection: 'row',\n        borderBottomWidth: 1,\n        borderBottomColor: '#ddd',\n        marginHorizontal: 10,\n        width: '95%',\n        height: 50,\n        alignItems: 'center',\n        alignSelf: 'center',\n        overflow: 'hidden',\n        zIndex: 9999\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 53\n      }\n    }, React.createElement(Icon, {\n      type: 'Entypo',\n      name: 'location',\n      style: {\n        marginHorizontal: 10,\n        color: '#000',\n        fontSize: 16\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 57\n      }\n    }), React.createElement(Text, {\n      style: [styles.text_gray, styles.textBold, styles._alignText],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 57\n      }\n    }, item.formatted_address.substr(0, 40) + '...'));\n  })))) : null, initMap ? React.createElement(View, {\n    style: [styles.loading, styles.flexCenter, {\n      height: '100%'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 33\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: COLORS.blue,\n    style: {\n      alignSelf: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 37\n    }\n  })) : React.createElement(MapView, {\n    ref: mapRef,\n    onRegionChangeComplete: function onRegionChangeComplete(e) {\n      return _handleMapRegionChange(e);\n    },\n    style: {\n      width: '100%',\n      height: '100%',\n      zIndex: 0\n    },\n    initialRegion: {\n      latitude: userLocation.latitude,\n      longitude: userLocation.longitude,\n      latitudeDelta: 0.422,\n      longitudeDelta: 0.121\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 33\n    }\n  }), React.createElement(View, {\n    style: {\n      left: '50%',\n      marginLeft: -24,\n      marginTop: -48,\n      position: 'absolute',\n      top: '50%',\n      zIndex: 9999999,\n      width: 25,\n      height: 25\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 25\n    }\n  }, React.createElement(Image, {\n    style: {\n      width: 35,\n      height: 35\n    },\n    resizeMode: 'contain',\n    source: require(\"../../assets/images/blue_circle.png\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 29\n    }\n  }))), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return toggleModal();\n    },\n    style: [styles.mstrdaBtn, styles.Width_90, styles.marginBottom_10, styles.marginTop_55, {\n      position: 'absolute',\n      zIndex: 10,\n      alignSelf: 'center',\n      bottom: 100\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 21\n    }\n  }, React.createElement(Text, {\n    style: [styles.textRegular, styles.text_White, styles.textSize_15],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 25\n    }\n  }, i18n.t('newLoc'))))), React.createElement(Modal, {\n    onBackdropPress: toggleModal,\n    onBackButtonPress: toggleModal,\n    isVisible: showModal,\n    style: styles.bgModel,\n    avoidKeyboard: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: [styles.bg_White, styles.overHidden, styles.Width_100, {\n      borderTopStartRadius: 5,\n      borderTopEndRadius: 5\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 17\n    }\n  }, React.createElement(View, {\n    style: [styles.bg_gray, styles.Width_100, styles.paddingVertical_15, styles.paddingHorizontal_20],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 21\n    }\n  }, React.createElement(Text, {\n    style: [styles.textBold, styles.text_White, styles.textSize_15, styles.alignStart],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 25\n    }\n  }, i18n.t('locationName'))), React.createElement(View, {\n    style: [styles.paddingHorizontal_20, styles.paddingVertical_20],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 21\n    }\n  }, React.createElement(Item, {\n    style: {\n      width: '100%',\n      height: 60,\n      borderBottomWidth: 0,\n      alignItems: 'center',\n      justifyContent: 'center',\n      flexDirection: 'column'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 25\n    }\n  }, React.createElement(Input, {\n    style: [styles.input],\n    value: locationName,\n    onChangeText: function onChangeText(locationName) {\n      return setLocationName(locationName);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 29\n    }\n  })), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return saveLocation();\n    },\n    style: [styles.mstrdaBtn, styles.Width_90, styles.marginBottom_10, styles.marginTop_55, {\n      alignSelf: 'center'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 25\n    }\n  }, React.createElement(Text, {\n    style: [styles.textRegular, styles.text_White, styles.textSize_15],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 29\n    }\n  }, i18n.t('save')))))));\n}\n\nexport default SetLocation;","map":{"version":3,"sources":["/Users/ahmedtaha/Documents/work/react/amany/Archive/src/common/SetLocation.js"],"names":["React","useEffect","useRef","useState","Container","Content","Icon","Input","Item","Label","styles","i18n","useSelector","useDispatch","Header","COLORS","MapView","Location","axios","Modal","addPlace","editPlace","height","Dimensions","get","isIOS","Platform","OS","latitudeDelta","longitudeDelta","SetLocation","navigation","route","edit","params","latitude","longitude","name","address","id","initMap","setInitMap","lang","state","token","auth","user","data","mapRef","userLocation","setUserLocation","search","setSearch","searchResult","setSearchResult","selectedLocation","setLocation","searchHeight","setSearchHeight","locationName","setLocationName","showModal","setShowModal","dispatch","requestPermissionsAsync","status","alert","location","getCurrentPositionAsync","coords","toggleModal","_handleMapRegionChange","e","formattedItem","getCity","results","formatted_address","console","log","setSelectedLocation","item","geometry","lat","lng","current","animateToRegion","onSearch","endPoint","saveLocation","bg_gray","bgFullWidth","t","mapInputContainer","color","gray","fontSize","mapInput","bg_White","Width_100","marginTop_40","paddingBottom","length","alignSelf","width","maxHeight","borderBottomLeftRadius","borderBottomRightRadius","overflow","position","zIndex","top","left","minHeight","right","blue","backgroundColor","borderRadius","map","i","flexDirection","borderBottomWidth","borderBottomColor","marginHorizontal","alignItems","text_gray","textBold","_alignText","substr","loading","flexCenter","marginLeft","marginTop","require","mstrdaBtn","Width_90","marginBottom_10","marginTop_55","bottom","textRegular","text_White","textSize_15","bgModel","overHidden","borderTopStartRadius","borderTopEndRadius","paddingVertical_15","paddingHorizontal_20","alignStart","paddingVertical_20","justifyContent","input"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from \"react\";\nimport {View, Text, Image, TouchableOpacity, Dimensions, ActivityIndicator, I18nManager, ScrollView} from \"react-native\";\nimport {Container, Content, Icon, Input, Item, Label} from 'native-base'\nimport styles from '../../assets/styles'\nimport i18n from \"../../locale/i18n\";\nimport {useSelector, useDispatch} from 'react-redux';\nimport Header from './Header';\nimport COLORS from \"../consts/colors\";\nimport MapView from 'react-native-maps';\nimport * as Location from 'expo-location';\nimport axios from 'axios'\nimport  Modal  from \"react-native-modal\";\nimport {addPlace, editPlace} from '../actions';\n\nconst height            = Dimensions.get('window').height;\nconst isIOS             = Platform.OS === 'ios';\nconst latitudeDelta     = 0.922;\nconst longitudeDelta    = 0.521;\n\nfunction SetLocation({navigation,route}) {\n    const { edit } = route.params\n    const { latitude , longitude, name, address, id } = route.params ?? null\n    const [initMap, setInitMap]\t            = useState(true);\n    const lang                              = useSelector(state => state.lang.lang);\n    const token                             = useSelector(state => state.auth.user ? state.auth.user.data.token : null);\n    let mapRef \t\t\t\t\t\t\t\t= useRef(null);\n    const [userLocation, setUserLocation]   = useState([]);\n    const [search, setSearch]   \t\t\t= useState('');\n    const [searchResult, setSearchResult]   = useState([]);\n    const [selectedLocation, setLocation]   = useState(null);\n    const [searchHeight, setSearchHeight]   = useState(70);\n    const [locationName, setLocationName]   = useState('');\n    const [showModal, setShowModal]         = useState(false);\n    const dispatch                          = useDispatch();\n\n    useEffect(() => {\n        (async () => {\n            let { status } = await Location.requestPermissionsAsync();\n\n            if (status !== 'granted') {\n                alert('Permission to access location was denied');\n                setUserLocation({latitude:'24.774265', longitude:'46.738586'});\n                setInitMap(false)\n            }\n\n            if (edit){\n                const location = { latitude, longitude };\n\n                setUserLocation(location);\n                setLocationName(name)\n                setSearch(address)\n            }else{\n                const { coords: { latitude, longitude } } = await Location.getCurrentPositionAsync({});\n                const location = { latitude, longitude };\n\n                setUserLocation(location);\n\n                setLocationName('')\n                setSearch('')\n            }\n\n            setInitMap(false)\n        })();\n    }, [edit, route.params?.id]);\n\n\n    function toggleModal () {\n        setShowModal(!showModal);\n    }\n\n\n    async function _handleMapRegionChange(e){\n\n        // searchRef.current.blur()\n\n        let formattedItem = {\n            name: '',\n            address:  '',\n            latitude: e.latitude,\n            longitude: e.longitude\n        };\n\n        let getCity = 'https://maps.googleapis.com/maps/api/geocode/json?latlng=';\n        getCity    += e.latitude + ',' + e.longitude;\n        getCity    += '&key=AIzaSyCJTSwkdcdRpIXp2yG7DfSRKFWxKhQdYhQ&language=ar&sensor=true';\n\n        try {\n            const { data } = await axios.get(getCity);\n            formattedItem  = {\n                name:       data.results[0].formatted_address,\n                address:    data.results[0].formatted_address,\n                latitude:   e.latitude,\n                longitude:  e.longitude\n            };\n\n            setSearch(data.results[0].formatted_address)\n\n        } catch (e) { console.log(e); }\n\n        setLocation(formattedItem)\n    }\n\n    function setSelectedLocation(item) {\n        const { geometry: { location } } = item;\n\n        const formattedItem = {\n            name\t\t:   item.formatted_address,\n            address\t\t:   item.formatted_address,\n            latitude\t: \tlocation.lat,\n            longitude\t: \tlocation.lng\n        };\n\n        setSearchResult([]);\n        setSearchHeight(60);\n        setLocation(formattedItem);\n\n        mapRef.current.animateToRegion(\n            {\n                latitude: formattedItem.latitude,\n                longitude: formattedItem.longitude,\n                latitudeDelta: 0.422,\n                longitudeDelta: 0.121,\n            },\n            350\n        );\n    }\n\n    async function onSearch() {\n        let endPoint = 'https://maps.googleapis.com/maps/api/place/textsearch/json?query=';\n        endPoint    += search;\n        endPoint    += '&key=AIzaSyCJTSwkdcdRpIXp2yG7DfSRKFWxKhQdYhQ&language=' + lang;\n\n        try {\n            const { data } = await axios.get(endPoint);\n            setSearchResult(data.results);\n            setSearchHeight(270);\n\n        } catch (e) {\n            console.log(e);\n        }\n    }\n\n    function saveLocation(){\n            toggleModal()\n\n        if (edit)\n            dispatch(editPlace(lang, id, userLocation.latitude, userLocation.longitude,  search, locationName, token, navigation))\n        else\n            dispatch(addPlace(lang, userLocation.latitude, userLocation.longitude,  search, locationName, token, navigation))\n    }\n\n    return (\n        <Container style={[styles.bg_gray]}>\n            <Content contentContainerStyle={[styles.bgFullWidth , styles.bg_gray]}>\n                <Header navigation={navigation} title={ i18n.t('home') } fromLoc={true}/>\n\n                <View style={[styles.mapInputContainer]}>\n                    <Icon type='Entypo' name='location-pin' style={{ color: COLORS.gray, fontSize: 20 }}/>\n                    <Input style={[styles.mapInput]} placeholder={i18n.t('chooseLocation')} value={search} onChangeText={(search) => setSearch(search)} onSubmitEditing={() => onSearch()} />\n                </View>\n\n                <View style={[styles.bgFullWidth ,styles.bg_White, styles.Width_100 , styles.marginTop_40 , {paddingBottom:35}]}>\n\n                    <View>\n\n                        {\n                            searchResult && searchResult.length > 0 ?\n                                <View style={{ alignSelf: 'center', width: '86%', maxHeight: 200, borderBottomLeftRadius: 10, borderBottomRightRadius: 10, overflow: 'hidden', position: 'absolute', zIndex: 2, top: 30, left: 30, minHeight: 60 }}>\n                                    <TouchableOpacity style={{ position: 'absolute', zIndex: 3, right: -1, top: -1.5 }} onPress={() => setSearchResult([])}>\n                                        <Icon type={'AntDesign'} name={'closecircle'} style={{ color: COLORS.blue }} />\n                                    </TouchableOpacity>\n                                    <View style={{ alignSelf: 'center', width: '100%', height: 220, borderBottomLeftRadius: 10, borderBottomRightRadius: 10, paddingBottom: 20, backgroundColor: '#fff', borderRadius: 10}}>\n                                        <ScrollView style={{ zIndex: 99999999 }}>\n                                            {\n                                                searchResult.map((item, i) => (\n\n                                                    <TouchableOpacity key={i} onPress={() => setSelectedLocation(item)} style={{ flexDirection: 'row', borderBottomWidth: 1, borderBottomColor: '#ddd', marginHorizontal: 10, width: '95%', height: 50, alignItems: 'center', alignSelf: 'center', overflow: 'hidden', zIndex: 9999 }}>\n                                                        <Icon type={'Entypo'} name={'location'} style={{ marginHorizontal: 10, color: '#000', fontSize: 16 }}/>\n                                                        <Text style={[ styles.text_gray, styles.textBold, styles._alignText, ]}>{ (item.formatted_address).substr(0, 40) + '...' }</Text>\n                                                    </TouchableOpacity>\n                                                ))\n                                            }\n\n                                        </ScrollView>\n                                    </View>\n                                </View>\n                                :\n                                null\n                        }\n\n                        {\n                            initMap ?\n                                <View style={[styles.loading, styles.flexCenter, {height:'100%'}]}>\n                                    <ActivityIndicator size=\"large\" color={COLORS.blue} style={{ alignSelf: 'center' }} />\n                                </View> :\n                                <MapView\n                                    ref={mapRef}\n                                    onRegionChangeComplete={(e) =>  _handleMapRegionChange(e)}\n                                    style={{ width: '100%', height: '100%', zIndex: 0 }}\n                                    initialRegion={{\n                                        latitude:  userLocation.latitude,\n                                        longitude: userLocation.longitude,\n                                        latitudeDelta: 0.422,\n                                        longitudeDelta: 0.121,\n                                    }}\n                                >\n                                </MapView>\n                        }\n\n                        <View style={{ left: '50%', marginLeft: -24, marginTop: -48, position: 'absolute', top: '50%', zIndex: 9999999, width: 25, height: 25 }}>\n                            <Image style={{width: 35, height: 35}} resizeMode={'contain'} source={require('../../assets/images/blue_circle.png')} />\n                        </View>\n                    </View>\n\n                    <TouchableOpacity onPress={() => toggleModal()} style={[styles.mstrdaBtn , styles.Width_90 , styles.marginBottom_10 , styles.marginTop_55, { position: 'absolute', zIndex: 10, alignSelf: 'center', bottom: 100 }]}>\n                        <Text style={[styles.textRegular , styles.text_White , styles.textSize_15]}>{ i18n.t('newLoc') }</Text>\n                    </TouchableOpacity>\n\n                </View>\n\n            </Content>\n            <Modal\n                onBackdropPress                 ={toggleModal}\n                onBackButtonPress               = {toggleModal}\n                isVisible                       = {showModal}\n                style                           = {styles.bgModel}\n                avoidKeyboard                    = {true}\n            >\n\n                <View style={[styles.bg_White, styles.overHidden, styles.Width_100, {borderTopStartRadius:5 , borderTopEndRadius:5}]}>\n\n                    <View style={[styles.bg_gray , styles.Width_100 , styles.paddingVertical_15 , styles.paddingHorizontal_20]}>\n                        <Text style={[styles.textBold , styles.text_White , styles.textSize_15 , styles.alignStart]}>{ i18n.t('locationName') }</Text>\n                    </View>\n\n                    <View style={[styles.paddingHorizontal_20 , styles.paddingVertical_20]}>\n                        <Item style={{ width: '100%', height: 60, borderBottomWidth: 0, alignItems: 'center', justifyContent:'center', flexDirection:'column' }}>\n                            <Input style={[styles.input]} value={locationName} onChangeText={(locationName) => setLocationName(locationName)} />\n                        </Item>\n\n                        <TouchableOpacity onPress={() => saveLocation()} style={[styles.mstrdaBtn , styles.Width_90 , styles.marginBottom_10 , styles.marginTop_55, { alignSelf: 'center' }]}>\n                            <Text style={[styles.textRegular , styles.text_White , styles.textSize_15]}>{ i18n.t('save') }</Text>\n                        </TouchableOpacity>\n                    </View>\n                </View>\n\n            </Modal>\n        </Container>\n    );\n}\n\nexport default SetLocation;\n\n\n"]},"metadata":{},"sourceType":"module"}